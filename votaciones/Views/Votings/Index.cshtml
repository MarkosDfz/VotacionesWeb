@model IEnumerable<votaciones.Models.VotingIndexView>

@{
    ViewBag.Title = "Votaciones";
}
<div>
    <div class="row">
        <div class="col-sm-4"><h2>Votaciones</h2></div>
        <div class="col-sm-4"></div>
        <div class="col-sm-4" style="text-align:right">
            <br />
            <p>
                @Html.ActionLink("Nueva Votación", "Create", new { }, new { @class = "btn btn-primary" })
            </p>
        </div>
    </div>
</div>

  <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.State.Description)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Description)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Remarks)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DateTimeStart)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DateTimeEnd)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.IsForAllUsers)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.QuantityVotes)
            </th>
            <th>
                Ganador
            </th>
            <th>
                Acciones
            </th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.State.Description)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Description)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Remarks)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DateTimeStart)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DateTimeEnd)
                </td>
                <td align="center">
                    @Html.DisplayFor(modelItem => item.IsForAllUsers)
                </td>

                <td align="center">
                    @Html.DisplayFor(modelItem => item.QuantityVotes)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.Winner.FullName)
                </td>
                <td>
                    @Html.ActionLink("Editar", "Edit", new { id = item.VotingId }) |
                    @Html.ActionLink("Detalles", "Details", new { id = item.VotingId }) |
                    @Html.ActionLink("Cerrar", "Close", new { id = item.VotingId }, new { onclick = "return confirm('¿Está seguro de cerrar esta votación?')" }) |
                    @Html.ActionLink("Resultados", "ShowResults", new { id = item.VotingId }, new { target = "_blank" }) |
                    @Html.ActionLink("Eliminar", "Delete", new { id = item.VotingId }) |
                    @if (item.IsForAllUsers == true && item.State.Description == "Cerrada")
                    {
                      @Html.ActionLink("Facultad", "ShowFacultadResults", new { id = item.VotingId }, new { target = "_blank" })
                      @Html.ActionLink(" No Votaron", "ShowNoVote", new { id = item.VotingId }, new { target = "_blank" })
                    }
                </td>
            </tr>
        }

    </table>